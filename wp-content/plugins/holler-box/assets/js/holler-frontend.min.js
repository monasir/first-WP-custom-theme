!function(e,o,i,t){function n(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}var r={};r.init=function(){r.newVisitor=!1,r.checkForPreview()},Date.now||(Date.now=function(){return(new Date).getTime()}),r.checkForPreview=function(){if(n("hwp_preview")){var o=n("hwp_preview");return r.showNote(o),void r.noteListeners(o)}r.checkCookie(),e.hollerVars.active&&r.doActive(e.hollerVars.active)},r.checkCookie=function(){""===r.getCookie("hwp_visit")?(r.setCookie("hwp_visit",Date.now(),parseInt(e.hollerVars.expires)),r.setCookie("hwp_new","true",1),r.newVisitor=!0):""!=r.getCookie("hwp_new")&&(r.newVisitor=!0)},r.doActive=function(e){for(var o=0;o<e.length;o++)r.doChecks(e[o])},r.doChecks=function(t,n){if(o.getElementById("hwp-"+t)){var a=e.hollerVars[t];if(a.visitor&&("new"!==a.visitor||1==r.newVisitor)&&!("returning"===a.visitor&&0!=r.newVisitor||"interacts"===a.showSettings&&""!=r.getCookie("hwp_"+t+"_int")||""===e.hollerVars.isMobile&&"mobile_only"===a.devices||"1"===e.hollerVars.isMobile&&"desktop_only"===a.devices)){var s=r.getCookie("hwp_"+t+"_shown");if("hide_for"!==a.showSettings||"true"!==s||n){if("exit"===a.display_when){if("true"===r.getCookie("hwp-"+t+"_hide"))return;i("body").on("mouseleave",r.mouseExit)}if("scroll"!=a.display_when){if("exit"===a.display_when&&!n||"link"===a.display_when&&!n)return;var l="delay"===a.display_when?parseInt(a.delay):0;if("hwp-popup"===a.type&&"always"===a.showSettings)r.setCookie("hwp-"+t+"_hide","",-1);else if("hwp-popup"===a.type&&"interacts"===a.showSettings&&"true"===r.getCookie("hwp-"+t+"_hide"))return;setTimeout(function(){r.showNote(t),r.countNoteShown(t)},1e3*l)}else r.detectScroll(t)}}}},r.noteListeners=function(e){i("body").on("click",".hwp-close",r.hideItem).on("click",".hwp-floating-btn",r.btnClick).on("click",".hwp-text i",r.sendText).on("click","#hwp-"+e+" .hwp-email-btn",r.emailSubmitClick).on("click",".hwp-backdrop",r.bdClick),i(".hwp-text-input").on("keypress",r.submitChatTextOnEnter),i("#hwp-"+e+" .hwp-email-input").on("keypress",r.submitEmailOnEnter),i("#hwp-"+e+" a").on("click",r.interactionLink)},r.detectScroll=function(t){i(e).scroll(r.debounce(function(){i(e).scrollTop()/(i(o).height()-i(e).height())>.5&&!r.show["hwp-"+t]&&(r.showNote(t),r.show["hwp-"+t]=!0,r.countNoteShown(t))},250))},r.showNote=function(t){var n=e.hollerVars[t],a=o.getElementById("hwp-"+t);"hwp-popup"===n.type&&i(a).hasClass("hwp-show")?r.transitionOut(i("#hwp-bd-"+t)):"hwp-popup"===n.type&&r.transitionIn(i("#hwp-bd-"+t)),"true"===r.getCookie("hwp-"+t+"_hide")?(r.transitionOut(a),"always"===n.showSettings&&("1"!==n.hideBtn&&"holler-banner"!=n.type&&"footer-bar"!=n.type||r.setCookie("hwp-"+t+"_hide","",-1)),("1"!=n.hideBtn&&"holler-banner"!=n.type||"holler-banner"==n.type&&"always"===n.showSettings)&&r.transitionIn(i(".hwp-btn-"+t))):("fomo"===n.type&&n.fomoLoopTimes?r.fomoLoopStart(t,a,n.fomoLoopTimes,1):"fomo"===n.type?r.fomoContent(t,a):r.transitionIn(a),"1"!=n.hideBtn&&"holler-banner"!=n.type&&r.transitionOut(i(".hwp-btn-"+t)),"1"===n.showEmail&&"1"!=n.showChat&&r.showEmailSubmit(t),"1"===n.showChat&&r.transitionIn(o.querySelector("#hwp-"+t+" .hwp-chat"))),"1"===n.hideBtn&&r.hide(i(".hwp-btn-"+t)),"holler-banner"===n.type&&"true"!=r.getCookie("hwp-"+t+"_hide")&&r.toggleBnrMargin(t),"delay"!==n.hide_after||n.fomoDisplayTime||setTimeout(function(){r.transitionOut(a)},1e3*parseInt(n.hide_after_delay))},r.setCookie=function(e,i,t,n){var r=new Date;r.setTime(r.getTime()+24*t*60*60*1e3);var a="expires="+r.toUTCString();return n||(n="/"),o.cookie=e+"="+i+";"+a+";path="+n,i},r.getCookie=function(e){for(var i=e+"=",t=decodeURIComponent(o.cookie).split(";"),n=0;n<t.length;n++){for(var r=t[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(i))return r.substring(i.length,r.length)}return""},r.debounce=function(e,o){var i=null;return function(){var t=this,n=arguments;clearTimeout(i),i=setTimeout(function(){e.apply(t,n)},o)}},r.toggleBnrMargin=function(e,o){if(i("body").css("padding-top",""),!o){var t=i("#hwp-"+e).outerHeight();i("body").css("padding-top",t)}},r.hideItem=function(e){e.stopImmediatePropagation();var o=i(e.target).closest(".holler-box"),t=o.attr("id").split("-")[1];return r.toggleHide(t),o.hasClass("holler-banner")&&r.toggleBnrMargin(t,!0),!1},r.btnClick=function(e){e.stopImmediatePropagation();var o=i(this).data("id");r.toggleHide(o)},r.toggleHide=function(e){var o=r.getCookie("hwp-"+e+"_hide");console.log("hide "+e,o),"true"===o?r.setCookie("hwp-"+e+"_hide","true",-1):r.setCookie("hwp-"+e+"_hide","true",1),r.showNote(e)},r.transitionIn=function(e){i(e).css("display","block"),setTimeout(function(){i(e).addClass("hwp-transition-in").removeClass("hwp-hide")},1),setTimeout(function(){i(e).removeClass("hwp-transition-in").addClass("hwp-show")},300)},r.transitionOut=function(e){i(e).addClass("hwp-transition-out").removeClass("hwp-show"),setTimeout(function(){i(e).removeClass("hwp-transition-out").addClass("hwp-hide"),i(e).css("display","")},200)},r.show=function(e){e.style.display="block",i(e).removeClass("hwp-hide").addClass("hwp-show")},r.hide=function(e){i(e).removeClass("hwp-show").addClass("hwp-hide"),i(e).css("display","")},r.checkExistingMsg=function(){var o=e.localStorage.getItem("hwp-full-msg");if(o&&""!=o){for(var t=o.split("/n"),n=0;n<t.length;n++)i("#"+r.activeID+" .hwp-box-rows").append('<div class="hwp-row hwp-visitor-row">'+t[n]+"</div>");r.showEmailSubmit()}},r.submitChatTextOnEnter=function(e){if(e.target.value&&""!=e.target.value&&13==e.keyCode){var o=i(e.target).closest(".holler-box").attr("id").split("-")[1];r.submitText(e.target.value,o),e.target.value=""}},r.submitEmailOnEnter=function(e){if(e.target.value&&""!=e.target.value&&13==e.keyCode){var o=i(e.target).closest(".holler-box").attr("id").split("-")[1];e.preventDefault(),r.emailSubmitted(o)}},r.sendText=function(e){e.stopImmediatePropagation();var o=i(e.target).closest(".holler-box").attr("id").split("-")[1],t=i("#hwp-"+o+" .hwp-text-input").val();t&&""!=t&&(r.submitText(t,o),i("#hwp-"+o+" .hwp-text-input").val("").focus())},r.submitText=function(o,t){var n=e.localStorage.getItem("hwp-full-msg");i("#hwp-"+t+" .hwp-box-rows").append('<div class="hwp-row hwp-visitor-row">'+o+"</div>"),n?n+="\n"+o:n=o,e.localStorage.setItem("hwp-full-msg",n),setTimeout(function(){r.showEmailSubmit(t)},5e3)},r.showEmailSubmit=function(t){var n=i("#hwp-"+t+" .hwp-email-row"),r=e.hollerVars[t];n.hasClass("hwp-show")||(o.querySelector("#hwp-"+t+" .hwp-email-input").setAttribute("placeholder",r.placeholder),i(".hwp-away-msg").remove(),i("#hwp-"+t).addClass("has-optin"),n.removeClass("hwp-hide").addClass("hwp-show"),n.prepend('<span class="hwp-away-msg">'+r.optinMsg+"</span>"))},r.emailSubmitClick=function(e){e.stopImmediatePropagation(),e.preventDefault();var o=i(e.target).closest(".holler-box").attr("id").split("-")[1];r.emailSubmitted(o)},r.emailSubmitted=function(o){var t=i("#hwp-"+o+" .hwp-email-input").val();if(!t){var n;return n=e.hollerVars.emailErr?e.hollerVars.emailErr:"Please enter your email.",void alert(n+" err1")}var a=i("#hwp-"+o+" .hwp-name").val(),s=i("#hwp-"+o+" .holler-title").text();if(-1!==t.indexOf("@")&&-1!==t.indexOf(".")){if(""==i("#hwp-"+o+" input[name=hwp_hp]").val())if("ck"!==e.hollerVars[o].emailProvider)if("mc"!==e.hollerVars[o].emailProvider)if("ac"!==e.hollerVars[o].emailProvider)if("mailpoet"!==e.hollerVars[o].emailProvider)if("drip"!==e.hollerVars[o].emailProvider){var l=e.localStorage.getItem("hwp-full-msg");r.sendMsg(t,a,l,o,s)}else r.dripSubscribe(t,o);else r.mpSubscribe(t,o);else r.acSubscribe(t,o);else r.mcSubscribe(t,o);else r.ckSubscribe(t,o)}else alert(e.hollerVars.emailErr+" err2")},r.ckSubscribe=function(o,t){var n=e.hollerVars[t],a="https://api.convertkit.com/v3/forms/"+i("#hwp-"+t+" .ck-form-id").val()+"/subscribe",s=i("#hwp-"+t+" .hwp-name").val();r.showSpinner(t),i.ajax({method:"POST",url:a,data:{email:o,api_key:n.ckApi,first_name:s}}).done(function(e){r.showConfirmation(t),i("#hwp-"+t+" .hwp-email-row").hide(),r.conversion(t)}).fail(function(e){r.hideSpinner(),i("#hwp-"+t+" .hwp-email-row").prepend('<span id="hwp-err">There seems to be a problem, can you try again?</span>'),setTimeout(function(){i("#hwp-err").remove()},3e3),console.log(e)})},r.mcSubscribe=function(o,t){var n=i("#hwp-"+t+" .mc-list-id").val(),a=i("#hwp-"+t+" .hwp-name").val(),s=i("#hwp-"+t+" .mc-interests").val();s&&(s=JSON.parse(s)),n?(r.showSpinner(t),i.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:{email:o,list_id:n,action:"hwp_mc_subscribe",interests:s,nonce:e.hollerVars.hwpNonce,name:a}}).done(function(e){r.showConfirmation(t),i("#hwp-"+t+" .hwp-email-row").hide(),r.conversion(t)}).fail(function(e){console.log(e),r.hideSpinner()})):alert("MailChimp list ID is missing.")},r.acSubscribe=function(o,t){var n=i("#hwp-"+t+" .ac-list-id").val(),a=i("#hwp-"+t+" .hwp-name").val();n?(r.showSpinner(t),i.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:{email:o,list_id:n,action:"hwp_ac_subscribe",nonce:e.hollerVars.hwpNonce,name:a}}).done(function(e){1==e.success?(r.showConfirmation(t),i("#hwp-"+t+" .hwp-email-row").hide(),r.conversion(t)):(console.warn(e),i("#hwp-"+t+" .hwp-first-row").html("<p>"+e.data+"</p>"),r.hideSpinner())}).fail(function(e){console.warn(e),r.hideSpinner()})):alert("List ID is missing.")},r.dripSubscribe=function(o,t){if(e._dcq){var n=i("#hwp-"+t+" .drip-tags").val(),a=i("#hwp-"+t+" .hwp-name").val(),s=n.split(",");r.showSpinner(t),r.dripid=t;_dcq.push(["identify",{email:o,first_name:a,tags:s,success:r.dripResponse,failure:r.dripResponse}])}else alert("Drip code not installed properly.")},r.dripResponse=function(e){r.hideSpinner(),1==e.success?(r.showConfirmation(r.dripid),i("#hwp-"+r.dripid+" .hwp-email-row").hide(),r.conversion(r.dripid)):(console.warn(e),i("#hwp-"+r.dripid+" .hwp-first-row").html("<p>"+e.error+"</p>"))},r.mpSubscribe=function(o,t){var n=i("#hwp-"+t+" .mailpoet-list-id").val();if(n){var a=i("#hwp-"+t+" .hwp-name").val();r.showSpinner(t),i.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:{email:o,list_id:n,action:"hwp_mailpoet_subscribe",nonce:e.hollerVars.hwpNonce,name:a}}).done(function(e){r.showConfirmation(t),i("#hwp-"+t+" .hwp-email-row").hide(),r.conversion(t)}).fail(function(e){console.log(e),r.hideSpinner()})}else alert("List ID is missing.")},r.sendMsg=function(o,t,n,a,s){r.showSpinner(a),i.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:{email:o,name:t,id:a,msg:n,action:"hwp_send_email",nonce:e.hollerVars.hwpNonce,title:s}}).done(function(e){r.clearChat(a),r.showConfirmation(a),r.conversion(a)}).fail(function(e){console.log(e),r.hideSpinner()})},r.clearChat=function(o){i("#hwp-"+o+" .hwp-chat").hasClass("hwp-hide")||(e.localStorage.removeItem("hwp-full-msg"),i("#hwp-"+o+" .hwp-visitor-row, #hwp-"+o+" .hwp-away-msg").remove()),r.hide(i("#hwp-"+o+" .hwp-email-row"))},r.interactionLink=function(e){if("http://hollerwp.com/"!==e.target.href){var o=i(e.target).closest(".holler-box").attr("id").split("-")[1];r.conversion(o)}},r.conversion=function(o){var t={action:"hwp_track_event",nonce:e.hollerVars.hwpNonce,id:o};i.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:t}).done(function(t){var n=e.hollerVars[o].redirect;n&&(i("#hwp-"+o+" .hwp-first-row").append(' Redirecting... <img src="'+e.hollerVars.pluginUrl+'assets/img/loading.gif" class="hwp-loading" />'),setTimeout(function(){e.location.href=n},1e3))}).fail(function(e){console.log(e)}),r.setCookie("hwp_"+o+"_int","true",1)},r.showConfirmation=function(o){r.hideSpinner();var t=e.hollerVars[o],n=""!=t.confirmMsg?t.confirmMsg:"Thanks!";"holler-banner"===t.type?(i("#hwp-"+o+" .hwp-box-rows").addClass("hwp-full-width").html(n),r.toggleBnrMargin(o)):i("#hwp-"+o+" .hwp-first-row").html(n),"1"===t.showChat&&r.clearChat(o)},r.countNoteShown=function(o){r.noteListeners(o);var t=e.hollerVars[o],n=t.hideForDays?parseInt(t.hideForDays):1;if(r.setCookie("hwp_"+o+"_shown","true",n),"1"!==e.hollerVars.disable_tracking){var a={action:"hwp_track_view",nonce:e.hollerVars.hwpNonce,id:o};i.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:a}).done(function(e){}).fail(function(e){})}},r.showSpinner=function(o){i("#hwp-"+o+" .hwp-email-row").html('<img src="'+e.hollerVars.pluginUrl+'assets/img/loading.gif" class="hwp-loading" />'),i("#hwp-"+o+" .hwp-name-row").hide()},r.hideSpinner=function(){i("img.hwp-loading").remove()},r.bdClick=function(e){e.stopImmediatePropagation();var o=i(e.currentTarget).data("id");r.toggleHide(o)},r.mouseExit=function(e){var o=i(".holler-box.hwp-show-on-exit")[0];if(o&&!i(o).hasClass("hwp-show")){var t=o.id.split("-")[1];r.doChecks(t,!0)}},r.fomoLoopStart=function(o,i,t,n){var a=e.hollerVars[o],s=a.fomoLoopDelay?1e3*parseInt(a.fomoLoopDelay):7e3,l=a.fomoDisplayTime?1e3*parseInt(a.fomoDisplayTime):3e3;r.fomoContent(o,i),r.fomoDisplayTime(l).then(function(){r.transitionOut(i),r.fomoLoop(o,i,t,n,s)})},r.fomoDisplayTime=function(e){return new Promise(function(o){setTimeout(function(){o()},e)})},r.fomoLoop=function(e,o,i,t,n){setTimeout(function(){++t<parseInt(i)+1&&r.fomoLoopStart(e,o,i,t)},n)},r.fomoContent=function(o,t){var n;n=r.getCookie("hwp_fomo"),n=n&&n>0?parseInt(n)+1:1;var a={action:"hwp_fomo_ajax",nonce:e.hollerVars.hwpNonce,int:n,id:o};i.ajax({method:"GET",url:e.hollerVars.ajaxurl,data:a}).done(function(e){e.data?(i("#hwp-"+o+" .hwp-first-row").html(e.data),r.transitionIn(t),i("#hwp-"+o+" a").on("click",r.interactionLink),parseInt(n)>10&&(n=1),r.setCookie("hwp_fomo",n,1)):r.setCookie("hwp_fomo",0,1)}).fail(function(e){r.setCookie("hwp_fomo",1,1),console.log(e)})},i(e).on("load",function(){r.init()}),e.hollerbox=r}(window,document,jQuery);